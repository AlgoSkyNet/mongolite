PKG_CPPFLAGS = -I. -Iyajl -Ibson -Imongoc -include apple.h \
 -DBSON_COMPILATION -DMONGOC_COMPILATION #-DBSON_DISABLE_CHECKS -DMONGOLITE_DEBUG

LIBMONGOC = $(wildcard mongoc/*.c)
LIBBSON = $(wildcard bson/*.c)
LIBYAJL = $(wildcard yajl/*.c)

PKG_LIBS = -L. -lmongoc -lbson -lssl -lyajl -lcrypto -lsasl2

all: clean libyajl.a libbson.a libmongoc.a

clean:
	rm -f *.o mongoc/*.o bson/*.o yajl/*.o
	rm -f *.a

libyajl.a: $(LIBYAJL:.c=.o)
	ar rcs libyajl.a yajl/*.o

libbson.a: $(LIBBSON:.c=.o)
	ar rcs libbson.a bson/*.o

libmongoc.a: $(LIBMONGOC:.c=.o)
	ar rcs libmongoc.a mongoc/*.o
